<!--
    This file describes the m3 model format and gets used by
    the script generateM3Library.py to generate the the file m3.py
    
    The generated m3.py file gets used by the blender addon to
    read and write the m3 file format. The m3 file format comes originally from
    Blizzard. It gets used in for example Starcraft 2 to describe models.
    
        
    Credits for gathering information about the m3 file format go to:
    * Florian KÃ¶berle - who created the first version of this file by using existing descriptions of the m3 file format
    * NiNtoxicated (madyavic@gmail.com) - who made an m3 Exporter and Importer for 3ds max
    * Leruster (leruster@gmail.com) - who helped improving the structure.xml file
    * Witchsong (http://code.google.com/p/libm3/) - who made a M3 library and helped NiNtoxicated on sequence data
    * Teal (starcraft.incgamers.com) - who made an PHP M3 parser
    * Blue Isle Studios (http://blueislestudios.com/) - who helped NiNtoxicated
    * Volcore (http://volcore.limbicsoft.com/)  - who helped NiNtoxicated figure out vertex flags
    * Sixen (http://www.sc2mapster.com/) - who provided NiNtoxicated with a good central resource for SC2 tools
    * der_Ton (http://www.doom3world.org/) - who worked on the MD5 format which is similar to M3
    * MrMoonKr - who provided NiNtoxicated a toUpper function to fix 3ds max incompatibility issues
    * Skizot - who helped NiNtoxicated with testing and providing suggestions to improve the script
    * Phygit - who provided NiNtoxicated with bug fixes and development information to do with the M3 format
    * ufoZ - who was One of the original people to reverse engineer the M2 format and to make a good maxscript importer from which NiNtoxicated importer/exporters were originally based
    * The SC2Mapster community (http://www.sc2mapster.com/) - who also collected information about m3 in the wiki: http://www.sc2mapster.com/wiki/sc2-api/game-files/models/model-header/

    Please give credit to this people if you use the xml or the (generated) code in your own scripts.

-->
<structures>
    <structure name="Reference">
        <description>A reference to one or more entries in a file</description>
        <versions>
            <version number="0" size="12" />
        </versions>
        <fields>
            <field name="entries" type="uint32"/>
            <field name="index" type="uint32" />
            <field name="flags" type="uint32" />
        </fields>
    </structure>
    
    <structure name="SmallReference" >
        <description>A reference to one or more entries in a file</description>
        <versions>
            <version number="0" size="8" />
        </versions>
        <fields>
            <field name="entries" type="uint32"/>
            <field name="index" type="uint32" />
        </fields>
    </structure>
    
    <structure name="VEC2">
        <description>A Vector with 2 components</description>
        <versions>
            <version number="0" size="8" />
        </versions>
        <fields>
            <field name="x" type="float"/>
            <field name="y" type="float" />
        </fields>
    </structure>
    
    <structure name="VEC3">
        <description>A Vector with 3 components</description>
        <versions>
            <version number="0" size="12" />
        </versions>
        <fields>
            <field name="x" type="float"/>
            <field name="y" type="float" />
            <field name="z" type="float"/>
        </fields>
    </structure>
    
    <structure name="VEC4">
        <description>A Vector with 4 components</description>
        <versions>
            <version number="0" size="16" />
        </versions>
        <fields>
            <field name="x" type="float"/>
            <field name="y" type="float" />
            <field name="z" type="float"/>
            <field name="w" type="float"/>
        </fields>
    </structure>
    
    <structure name="QUAT">
        <description>A Quaternion </description>
        <versions>
            <version number="0" size="16" />
        </versions>
        <fields>
            <field name="x" type="float"/>
            <field name="y" type="float" />
            <field name="z" type="float"/>
            <field name="w" type="float"/>
        </fields>
    </structure>
    <structure name="Matrix44">
        <description>A 4x4 Matrix</description>
        <versions>
            <version number="0" size="64" />
        </versions>
        <fields>
            <field name="x" type="VEC4V0"/>
            <field name="y" type="VEC4V0" />
            <field name="z" type="VEC4V0"/>
            <field name="w" type="VEC4V0"/>
        </fields>
    </structure>
    <structure name="Vector3As3Fixed8">
        <description>A vector out of 3 bytes which must be converted with the formula (((i / 255.0) * 2) -1) to get the actual float value</description>
        <versions>
            <version number="0" size="3" />
        </versions>
        <fields>
            <field name="x" type="fixed8"/>
            <field name="y" type="fixed8" />
            <field name="z" type="fixed8"/>
        </fields>
    </structure>
    <structure name="Vector2As2int16">
        <description>A vector out of int16 values which must be converted with the formula (i / 2048.0) to get the actual float value</description>
        <versions>
            <version number="0" size="4" />
        </versions>
        <fields>
            <field name="x" type="int16"/>
            <field name="y" type="int16" />
        </fields>
    </structure>
    <structure name="COL">
        <description>Defines a color with alpha using 1 byte for each color component</description>
        <versions>
            <version number="0" size="4" />
        </versions>
        <fields>
            <field name="blue" type="uint8"/>
            <field name="green" type="uint8" />
            <field name="red" type="uint8"/>
            <field name="alpha" type="uint8"/>
        </fields>
    </structure>
    <structure name="FLAG">
        <description>A flag used by animations</description>
        <versions>
            <version number="0" size="4" />
        </versions>
        <fields>
            <field name="value" type="uint32" />
        </fields>
    </structure>
    <structure name="BNDS">
        <description>
            Describes the rough shape of an object.
            Center of bounding sphere =  (extend0 + extend1)/2
        </description>
        <versions>
            <version number="0" size="28" />
        </versions>
        <fields>
            <field name="minBorder" type="VEC3V0" />
            <field name="maxBorder" type="VEC3V0" />
            <!-- bounding_sphere_center = (extend0 + extend1)/2-->
            <field name="radius" type="float" />
        </fields>
    </structure>
    <structure name="AnimationReferenceHeader">
        <description>
            The header of a reference to an animation entry
            
            interpolationType: 0=constant, 1=linear
            animFlags seems to be 6 if the animation reference is valid and 0 otherwise 
            animId seem to be random but unique numbers
        </description>
        <versions>
            <version number="0" size="8" />
        </versions>
        <fields>
            <field name="interpolationType" type="uint16" />
            <field name="animFlags" type="uint16" />
            <field name="animId" type="uint32" />
        </fields>
    </structure>
    <structure name="Vector3AnimationReference">
        <description>Animateable vector with 3 components</description>
        <versions>
            <version number="0" size="36" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="VEC3V0" />
            <field name="nullValue" type="VEC3V0" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
        <structure name="SVC3" >
        <description>
            Vector 3 animation reference
        </description>
        <versions>
            <version number="0" size="36" />
        </versions>
        <fields>
            <field name="unknown" type="Vector3AnimationReferenceV0" />
        </fields>
    </structure>
    <structure name="Vector2AnimationReference">
        <description>Animatable vector with 2 components</description>
        <versions>
            <version number="0" size="28" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="VEC2V0" />
            <field name="nullValue" type="VEC2V0" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
    <structure name="QuaternionAnimationReference">
        <description>Animatable vector4</description>
        <versions>
            <version number="0" size="44" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="QUATV0" />
            <field name="nullValue" type="QUATV0" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
    <structure name="UInt32AnimationReference">
        <description>Animatable  uint32</description>
        <versions>
            <version number="0" size="20" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="uint32" />
            <field name="nullValue" type="uint32" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
    <structure name="UInt16AnimationReference">
        <description>Animatable uint16</description>
        <versions>
            <version number="0" size="16" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="uint16" />
            <field name="nullValue" type="uint16" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
    <structure name="Int16AnimationReference">
        <description>Animatable int16</description>
        <versions>
            <version number="0" size="16" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="int16" />
            <field name="nullValue" type="int16" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
    <structure name="FloatAnimationReference">
        <description>Animatable float</description>
        <versions>
            <version number="0" size="20" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="float" />
            <field name="nullValue" type="float" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
    <structure name="ColorAnimationReference">
        <description>Animatable color</description>
        <versions>
            <version number="0" size="20" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="COLV0" />
            <field name="nullValue" type="COLV0" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
    <structure name="FlagAnimationReference">
        <description>Animatable boolean</description>
        <versions>
            <version number="0" size="20" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="FLAGV0" />
            <field name="nullValue" type="FLAGV0" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
    <structure name="BNDSV0AnimationReference">
        <description>Animatable boundings</description>
        <versions>
            <version number="0" size="68" />
        </versions>
        <fields>
            <field name="header" type="AnimationReferenceHeader" />
            <field name="initValue" type="BNDSV0" />
            <field name="nullValue" type="BNDSV0" />
            <field name="unknown" type="int32" default-value="-1"  />
        </fields>
    </structure>
    <structure name="REAL">
        <description>A float</description>
        <versions>
            <version number="0" size="4" />
        </versions>
        <fields>
            <field name="value" type="float" />
        </fields>
    </structure>
    <structure name="CHAR">
        <description>An one byte character. An array always terminates with 0.</description>
        <versions>
            <version number="0" size="1" />
        </versions>
        <fields>
            <field name="value" type="uint8" />
        </fields>
    </structure>
    <structure name="U8__">
        <description>An unsigned integer</description>
        <versions>
            <version number="0" size="1" />
        </versions>
        <fields>
            <field name="value" type="uint8" />
        </fields>
    </structure>
    <structure name="I16_">
        <description>An signed integer with 16 bits</description>
        <versions>
            <version number="0" size="2" />
        </versions>
        <fields>
            <field name="value" type="int16" />
        </fields>
    </structure>
    <structure name="U16_">
        <description>An unsigned integer with 16 bits</description>
        <versions>
            <version number="0" size="2" />
        </versions>
        <fields>
            <field name="value" type="uint16" />
        </fields>
    </structure>
    <structure name="I32_">
        <description>An signed integer </description>
        <versions>
            <version number="0" size="4" />
        </versions>
        <fields>
            <field name="value" type="int32" />
        </fields>
    </structure>
    <structure name="U32_" >
        <description>An unsigned integer</description>
        <versions>
            <version number="0" size="4" />
        </versions>
        <fields>
            <field name="value" type="uint32" />
        </fields>
    </structure>
    <structure name="MD34IndexEntry">
        <description>Entry of the tag index. Position and size of the tag index gets desribed by MD34</description>
        <versions>
            <version number="0" size="16" />
        </versions>
        <fields>
            <field name="tag" type="tag" />
            <field name="offset" type="uint32" />
            <field name="repetitions" type="uint32" />
            <field name="version" type="uint32" />
        </fields>
    </structure>
    <structure name="VertexFormat0x182027d">
        <description>Vertex with one UV coordinate and an unknown field</description>
        <versions>
            <version number="0" size="36" />
        </versions>
        <fields>
            <field name="position" type="VEC3V0" />
            <field name="boneWeight0" type="uint8" default-value="0" />
            <field name="boneWeight1" type="uint8" default-value="0" />
            <field name="boneWeight2" type="uint8" default-value="0" />
            <field name="boneWeight3" type="uint8" default-value="0"/>
            <field name="boneLookupIndex0" type="uint8" default-value="0" />
            <field name="boneLookupIndex1" type="uint8" default-value="0" />
            <field name="boneLookupIndex2" type="uint8" default-value="0" />
            <field name="boneLookupIndex3" type="uint8" default-value="0" />
            <field name="normal" type="Vector3As3Fixed8V0" />
            <field name="sign" type="fixed8" />
            <field name="unknown" type="uint32" expected-value="0xffffffff"/>
            <field name="uv0" type="Vector2As2int16V0" />
            <field name="tangent" type="Vector3As3Fixed8V0" />
            <field name="unused" type="fixed8" default-value="1.0" /> <!-- Can be -1.0 in old 3ds max exporter files -->
        </fields>
    </structure>
    <structure name="VertexFormat0x182007d" >
        <description>Vertex with one UV coordinate</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="position" type="VEC3V0" />
            <field name="boneWeight0" type="uint8" default-value="0" />
            <field name="boneWeight1" type="uint8" default-value="0" />
            <field name="boneWeight2" type="uint8" default-value="0" />
            <field name="boneWeight3" type="uint8" default-value="0"/>
            <field name="boneLookupIndex0" type="uint8" default-value="0" />
            <field name="boneLookupIndex1" type="uint8" default-value="0" />
            <field name="boneLookupIndex2" type="uint8" default-value="0" />
            <field name="boneLookupIndex3" type="uint8" default-value="0" />
            <field name="normal" type="Vector3As3Fixed8V0" />
            <field name="sign" type="fixed8" />
            <field name="uv0" type="Vector2As2int16V0" />
            <field name="tangent" type="Vector3As3Fixed8V0" />
            <field name="unused" type="fixed8" default-value="1.0" />
        </fields>
    </structure>
    <structure name="VertexFormat0x186007d" >
        <description>Vertex with two UV coordinates</description>
        <versions>
            <version number="0" size="36" />
        </versions>
        <fields>
            <field name="position" type="VEC3V0" />
            <field name="boneWeight0" type="uint8" default-value="0" />
            <field name="boneWeight1" type="uint8" default-value="0" />
            <field name="boneWeight2" type="uint8" default-value="0" />
            <field name="boneWeight3" type="uint8" default-value="0" />
            <field name="boneLookupIndex0" type="uint8" default-value="0" />
            <field name="boneLookupIndex1" type="uint8" default-value="0" />
            <field name="boneLookupIndex2" type="uint8" default-value="0" />
            <field name="boneLookupIndex3" type="uint8" default-value="0" />
            <field name="normal" type="Vector3As3Fixed8V0" />
            <field name="sign" type="fixed8" />
            <field name="uv0" type="Vector2As2int16V0" />
            <field name="uv1" type="Vector2As2int16V0" />
            <field name="tangent" type="Vector3As3Fixed8V0" />
            <field name="unused" type="fixed8" default-value="1.0" />
        </fields>
    </structure>
    <structure name="VertexFormat0x186027d" >
        <description>Vertex with two UV coordinates and one unknown</description>
        <versions>
            <version number="0" size="40" />
        </versions>
        <fields>
            <field name="position" type="VEC3V0" />
            <field name="boneWeight0" type="uint8" default-value="0" />
            <field name="boneWeight1" type="uint8" default-value="0" />
            <field name="boneWeight2" type="uint8" default-value="0" />
            <field name="boneWeight3" type="uint8" default-value="0" />
            <field name="boneLookupIndex0" type="uint8" default-value="0" />
            <field name="boneLookupIndex1" type="uint8" default-value="0" />
            <field name="boneLookupIndex2" type="uint8" default-value="0" />
            <field name="boneLookupIndex3" type="uint8" default-value="0" />
            <field name="normal" type="Vector3As3Fixed8V0" />
            <field name="sign" type="fixed8" />
            <field name="unknown" type="uint32" expected-value="0xffffffff"/>
            <field name="uv0" type="Vector2As2int16V0" />
            <field name="uv1" type="Vector2As2int16V0" />
            <field name="tangent" type="Vector3As3Fixed8V0" />
            <field name="unused" type="fixed8" default-value="1.0" />
        </fields>
    </structure>
    <structure name="VertexFormat0x18e007d">
        <description>Vertex with three UV coordinates</description>
        <versions>
            <version number="0" size="40" />
        </versions>
        <fields>
            <field name="position" type="VEC3V0" />
            <field name="boneWeight0" type="uint8" default-value="0" />
            <field name="boneWeight1" type="uint8" default-value="0" />
            <field name="boneWeight2" type="uint8" default-value="0" />
            <field name="boneWeight3" type="uint8" default-value="0" />
            <field name="boneLookupIndex0" type="uint8" default-value="0" />
            <field name="boneLookupIndex1" type="uint8" default-value="0" />
            <field name="boneLookupIndex2" type="uint8" default-value="0" />
            <field name="boneLookupIndex3" type="uint8" default-value="0" />
            <field name="normal" type="Vector3As3Fixed8V0" />
            <field name="sign" type="fixed8" />
            <field name="uv0" type="Vector2As2int16V0" />
            <field name="uv1" type="Vector2As2int16V0" />
            <field name="uv2" type="Vector2As2int16V0" />
            <field name="tangent" type="Vector3As3Fixed8V0" />
            <field name="unused" type="fixed8" default-value="1.0" />
        </fields>
    </structure>
    <structure name="VertexFormat0x19e007d" >
        <description>Vertex with four UV coordinates</description>
        <versions>
            <version number="0" size="44" />
        </versions>
        <fields>
            <field name="position" type="VEC3V0" />
            <field name="boneWeight0" type="uint8" default-value="0" />
            <field name="boneWeight1" type="uint8" default-value="0" />
            <field name="boneWeight2" type="uint8" default-value="0" />
            <field name="boneWeight3" type="uint8" default-value="0" />
            <field name="boneLookupIndex0" type="uint8" default-value="0" />
            <field name="boneLookupIndex1" type="uint8" default-value="0" />
            <field name="boneLookupIndex2" type="uint8" default-value="0" />
            <field name="boneLookupIndex3" type="uint8" default-value="0" />
            <field name="normal" type="Vector3As3Fixed8V0" />
            <field name="sign" type="fixed8" />
            <field name="uv0" type="Vector2As2int16V0" />
            <field name="uv1" type="Vector2As2int16V0" />
            <field name="uv2" type="Vector2As2int16V0" />
            <field name="uv3" type="Vector2As2int16V0" />
            <field name="tangent" type="Vector3As3Fixed8V0" />
            <field name="unused" type="fixed8" default-value="1.0" />
        </fields>
    </structure>
    
    <structure name="EVNT">
        <description>An animation sequence event</description>
        <versions>
            <version number="1" size="104" />
            <version number="2" size="108" />
        </versions>
        <fields>
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="unknown0" type="int32" expected-value="-1" />
            <field name="unknown1" type="int16" default-value="-1" />
            <field name="unknown2" type="uint16" expected-value="0" />
            <field name="matrix" type="Matrix44" />
            <field name="unknown3" type="uint32" default-value="4" />
            <field name="unknown4" type="uint32" expected-value="0" />
            <field name="unknown5" type="uint32" expected-value="0" />
            <field name="unknown6" type="uint32" expected-value="0" />
            <field name="unknown7" type="uint32" expected-value="0" />
            <field name="unknown8" type="uint32" expected-value="0" since-version="2"/>
        </fields>
    </structure>
    
    <structure name="SDEV">
        <description>Event Key Frames Animation block with reference to EVNT</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="EVNT" />
        </fields>
    </structure>
    
    <structure name="SD2V">
        <description>Vector 2 Animation block with reference to VEC2</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="VEC2" />
        </fields>
    </structure>
    
    <structure name="SD3V">
        <description>Vector 3 Animation block with reference to VEC3</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="VEC3" />
        </fields>
    </structure>
    
    <structure name="SDR3">
        <description>Animation block with reference to REAL(float array)</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="REAL" />
        </fields>
    </structure>
    
    <structure name="SDCC">
        <description>Animation block with reference to COL (Color)</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="COL" />
        </fields>
    </structure>
    
    <structure name="SDS6">
        <description>Animation block with reference to I16_</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="I16_" />
        </fields>
    </structure>
    
    <structure name="SDU6">
        <description>Animation block with reference to U16_</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="U16_"/>
        </fields>
    </structure>
    
    <structure name="SD4Q">
        <description>Animation block with reference to QUAT</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="QUAT" />
        </fields>
    </structure>
    
    <structure name="SDFG">
        <description>Animation block with reference to FLAG</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="FLAG" />
        </fields>
    </structure>
    
    <structure name="SDMB">
        <description>Animation block with reference to BNDS</description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="frames" type="Reference" refTo="I32_" />
            <field name="flags" type="uint32" />
            <field name="fend" type="uint32" />
            <field name="keys" type="Reference" refTo="BNDS" />
        </fields>
    </structure>
    
    
    
    <structure name="BONE" version="1" size="160" >
        <description>A bone</description>
        <versions>
            <version number="1" size="160" />
        </versions>
        <fields>
            <field name="d1" type="int32" default-value="-1" />
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="flags" type="uint32" default-value="0" >
                <bits>
                    <bit mask="0x1" name="inhertTranslation" />
                    <bit mask="0x2" name="inheritScale" />
                    <bit mask="0x4" name="inheritRotation" />
                    <bit mask="0x10" name="billboard1" />
                    <bit mask="0x40" name="billboard2" />
                    <bit mask="0x100" name="twoDProjection" />
                    <bit mask="0x200" name="animated" />
                    <bit mask="0x400" name="inverseKinematics " />
                    <bit mask="0x800 " name="skinned" />
                    <bit mask="0x2000" name="real" />
                </bits>
            </field>
            <field name="parent" type="int16" default-value="-1" />
            <field name="s1" type="uint16" expected-value="0" />
            <field name="location" type="Vector3AnimationReferenceV0"/>
            <field name="rotation" type="QuaternionAnimationReference"/>
            <field name="scale" type="Vector3AnimationReferenceV0"/>
            <field name="ar1" type="UInt32AnimationReference"/>
        </fields>
    </structure>
    
    <structure name="STC_" version="4" size="204">
        <description>Sequence Transformations Collection
            animId: array of animation ids
            animref: array of integers is actually an array of short pairs:
            first 2 bytes: index which determines the field in this struct and thus kind
            of the animation data.
                e.g. 0 -> sdev, 1 -> sd2v etc.
            second: index in animation reference. e.g. sdev[index]
            
            There also seems to be always be the animation id:
            0x65bd3215 which referes to sdev[0] which has a name called "Evt_SeqEnd"
            Strangly it gets from no where referenced and is always the same id
            </description>
        <versions>
            <version number="4" size="204" />
        </versions>
        <fields>
            <field name="name" type="Reference"  refTo="CHAR" />
            <field name="runsConcurrent" type="uint16" default-value="0" />
            <field name="unknownAt14" type="uint16" default-value="0" />
            <field name="stsIndex" type="uint16"/>
            <field name="stsIndexCopy" type="uint16"/>
            <field name="animIds" type="Reference" refTo="U32_" />
            <field name="animRefs" type="Reference" refTo="U32_"/>
            <field name="unknownAt44" type="uint32" expected-value="0" />
            <field name="sdev" type="Reference" refTo="SDEV" />
            <field name="sd2v" type="Reference" refTo="SD2V" />
            <field name="sd3v" type="Reference" refTo="SD3V" />
            <field name="sd4q" type="Reference" refTo="SD4Q" />
            <field name="sdcc" type="Reference" refTo="SDCC" />
            <field name="sdr3" type="Reference" refTo="SDR3" />
            <field name="unknownRef8" type="Reference" />
            <field name="sds6" type="Reference" refTo="SDS6" />
            <field name="sdu6" type="Reference" refTo="SDU6" />
            <field name="unknownRef11" type="Reference" />
            <field name="unknownRef12" type="Reference" />
            <field name="sdfg" type="Reference" refTo="SDFG" />
            <field name="sdmb" type="Reference" refTo="SDMB" />
        </fields>
    </structure>

    <structure name="SEQS">
        <description>Animation Sequence</description>
        <versions>
            <version number="1" size="96" />
            <version number="2" size="92" />
        </versions>
        <fields>
            <field name="unknown0" type="int32" default-value="-1"/>
            <field name="unknown1" type="int32" default-value="-1"/>
            <field name="name" type="Reference" refTo="CHAR"/>
            <field name="animStartInMS" type="uint32" />
            <field name="animEndInMS" type="uint32" />
            <field name="movementSpeed" type="float" />
            <field name="flags" type="uint32" default-value="0" >
                <bits>
                    <bit mask="0x1" name="notLooping" />
                    <bit mask="0x2" name="alwaysGlobal" />
                    <bit mask="0x8" name="globalInPreviewer" />
                </bits>
            </field>
            <field name="frequency" type="uint32" />
            <field name="unknown2" type="uint32" expected-value="1"/>
            <field name="unknown3" type="uint32" expected-value="1"/>
            <field name="unknown4" type="uint32" expected-value="100"/>
            <field till-version="1" name="unknown5" type="uint32" default-value="0"/>
            <field name="boundingSphere" type="BNDSV0" />
            <field name="unknown6" type="uint32" expected-value="0"/>
            <field name="unknown7" type="uint32" expected-value="0"/>
            <field name="unknown8" type="uint32" expected-value="0"/>
        </fields>
    </structure>
    
    <structure name="STG_" version="0" size="24">
        <description>
            Seqeuence Transformation Group which can contain multiple STCs
            referenced by index as they are listed in the model.
            </description>
        <versions>
            <version number="0" size="24" />
        </versions>
        <fields>
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="stcIndices" type="Reference" refTo="U32_" />
        </fields>
    </structure>

    <structure name="STS_" version="0" size="28">
        <description></description>
        <versions>
            <version number="0" size="28" />
        </versions>
        <fields>
            <field name="animIds" type="Reference" refTo="U32_" />
            <field name="unknown0" type="int32" expected-value="-1"/>
            <field name="unknown1" type="int32" expected-value="-1"/>
            <field name="unknown2" type="int32" expected-value="-1"/>
            <field name="s1" type="int16" expected-value="-1"/>
            <field name="s2" type="uint16" expected-value="0"/>
        </fields>
    </structure>

    <structure name="IREF" version="0" size="64">
        <description>Just a 4x4 matrix</description>
        <versions>
            <version number="0" size="64" />
        </versions>
        <fields>
            <field name="matrix" type="Matrix44" />
        </fields>
    </structure>
    
    <structure name="REGN">
        <description>A region of a mesh</description>
        <versions>
            <version number="3" size="36" />
        </versions>
        <fields>
            <field name="unknown0" type="uint32" expected-value="0" />
            <field name="unknown1" type="uint32" expected-value="0" />
            <field name="firstVertexIndex" type="uint32"/>
            <field name="numberOfVertices" type="uint32" />
            <field name="firstFaceVertexIndexIndex" type="uint32" />
            <field name="numberOfFaceVertexIndices" type="uint32" />
            <field name="numberOfBones" type="uint16" />
            <field name="firstBoneLookupIndex" type="uint16" />
            <field name="numberOfBoneLookupIndices" type="uint16" />
            <field name="unknown2" type="uint16" expected-value="0" />
            <field name="numberOfBoneWeightPairsPerVertex" type="uint8" />
            <field name="unknown4" type="uint8" default-value="1" />
            <field name="rootBoneIndex" type="uint16" />
        </fields>
    </structure>
    
    <structure name="BAT_">
        <description></description>
        <versions>
            <version number="1" size="14" />
        </versions>
        <fields>
            <field name="unknown0" type="uint32" expected-value="0" />
            <field name="regionIndex" type="uint16" />
            <field name="unknown1" type="uint32" default-value="0" />
            <field name="materialReferenceIndex" type="uint16" />
            <field name="unknown2" type="int16" default-value="-1" />
        </fields>
    </structure>
    
    <structure name="MSEC">
        <description></description>
        <versions>
            <version number="1" size="72" />
        </versions>
        <fields>
            <field name="unknown0" type="uint32" default-value="0" />
            <field name="boundingsAnimation" type="BNDSV0AnimationReferenceV0" />
        </fields>
    </structure>
    
    <structure name="DIV_">
        <description>Mesh Division</description>
        <versions>
            <version number="2" size="52" /><!-- size correct? -->
        </versions>
        <fields>
            <field name="faces" type="Reference" refTo="U16_" />
            <field name="regions" type="Reference" refTo="REGN" />
            <field name="objects" type="Reference" refTo="BAT_" />
            <field name="msec" type="Reference" refTo="MSEC" />
            <!-- m3: 1, m3a: 0 -->
            <field name="unknown" type="uint32" default-value="1" />
        </fields>
    </structure>
    
    <structure name="ATT_">
        <description>Attachment Point</description>
        <versions>
            <version number="1" size="20" />
        </versions>
        <fields>
            <field name="unknown" type="int32" expected-value="-1" />
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="bone" type="uint32" />
        </fields>
    </structure>
    
    <structure name="LITE">
        <description>Light types: 0=directional 1=point 2=spot, hotSpot expressed in radians</description>
        <versions>
            <version number="7" size="212" />
        </versions>
        <fields>
            <field name="lightType" type="uint8" />
            <field name="unknownAt1" type="uint8" expected-value="0" />
            <field name="boneIndex" type="uint16" />
            <field name="flags" type="uint32" default-value="0x08">
                <bits>
                    <bit mask="0x1" name="shadowCast" />
                    <bit mask="0x2" name="specular" />
                    <bit mask="0x4" name="unknownFlag0x04" />
                    <bit mask="0x8" name="turnOn" />
                </bits>
            </field>
            <field name="unknownAt8" type="uint32" />
            <field name="unknownAt12" type="int32" default-value="-1" />
            <field name="lightColor" type="Vector3AnimationReferenceV0" />
            <field name="lightIntensity" type="FloatAnimationReference" />
            <field name="specColor" type="Vector3AnimationReferenceV0" />
            <field name="specIntensity" type="FloatAnimationReference" />
            <field name="attenuationFar" type="FloatAnimationReference" />
            <field name="unknownAt148" type="float" />
            <field name="attenuationNear" type="FloatAnimationReference" />
            <field name="hotSpot" type="FloatAnimationReference" />
            <field name="falloff" type="FloatAnimationReference" />
        </fields>
    </structure>
    
    <structure name="MATM">
        <description>A reference to a material of a specified type</description>
        <versions>
            <version number="0" size="8" />
        </versions>
        <fields>
            <field name="materialType" type="uint32" default-value="1" />
            <field name="materialIndex" type="uint32" />
        </fields>
    </structure>
    
    <structure name="PATU">
        <description>Unknown</description>
        <versions>
            <version number="4" size="152" />
        </versions>
        <fields>
            <field name="unknown" size="152" />
        </fields>
    </structure>
    
    <structure name="TRGD">
        <description>Unknown</description>
        <versions>
            <version number="0" size="24" />
        </versions>
        <fields>
            <field name="unknown0" type="Reference" refTo="U32_" />
            <field name="name" type="Reference" refTo="CHAR" />
        </fields>
    </structure>
    
    <structure name="LAYR" version="22" size="356" >
        <description>Describes a layer of a material</description>
        <versions>
            <version number="22" size="356" />
            <version number="24" size="436" />
            <version number="25" size="468" />
        </versions>
        <fields>
            <field name="unknown2daf9c00" type="uint32" expected-value="0" />
            <field name="imagePath" type="Reference" refTo="CHAR" />
            <field name="color" type="ColorAnimationReference" />
            <field name="flags" type="uint32" default-value="0xec">
                <bits>
                    <bit mask="0x4" name="textureWrapX" />
                    <bit mask="0x8" name="textureWrapY" />
                    <bit mask="0x10" name="invertColor" />
                    <bit mask="0x400" name="colorEnabled" />
                </bits>
            </field>
            <field name="uvSource" type="uint32" />
            <field name="alphaFlags" type="uint32" default-value="0" >
                <bits>
                    <bit mask="0x1" name="alphaAsTeamColor" />
                    <bit mask="0x2" name="alphaOnly" />
                    <bit mask="0x4" name="alphaBasedShading" />
                </bits>
            </field>
            <field name="brightMult" type="FloatAnimationReference" />
            <field name="midtoneOffset" type="FloatAnimationReference" />
            <field name="unknown3b61017a" type="uint32" expected-value="0" />
            <field name="unknownba9fac78" type="float" default-value="0.8" since-version="24" />
            <field name="unknownc77129b6" type="float" default-value="0.5" since-version="24" />
            <field name="rttChannel" type="int32" default-value="-1" />
            <field name="unknownfd48875c" size="8" expected-value="0x0000000000000000" />
            <field name="unknown63b7f7f2" type="int32" expected-value="0" />
            <field name="unknowna56066e9" size="8" expected-value="0x0000000000000000" />
            <field name="unknownbc0c14e5" type="UInt32AnimationReference" />
            <field name="unknowne740df12" type="FloatAnimationReference" />
            <field name="unknowne343f1b0" type="uint32" default-value="0" />
            <field name="unknown99d81c2c" type="uint32" default-value="0" />
            <field name="unknown39ade219" type="UInt16AnimationReference" />
            <field name="uvOffset" type="Vector2AnimationReferenceV0" />
            <field name="uvAngle" type="Vector3AnimationReferenceV0" />
            <field name="uvTiling" type="Vector2AnimationReferenceV0" />
            <field name="unknowna4ec0796" type="UInt32AnimationReference" />
            <field name="unknowna44bf452" type="FloatAnimationReference" />
            <field name="brightness" type="FloatAnimationReference" />            
            <field name="unknown3c5929ac" type="AnimationReferenceHeader" since-version="24"/>
            <field name="initOfUnknown3c5929ac" size="12" expected-value="0x000000000000000000000000" since-version="24" />
            <field name="nullOfUnknown3c5929ac" size="12" expected-value="0x000000000000000000000000" since-version="24"/>
            <field name="endOfUnknown3c5929ac" size="4" expected-value="0xffffffff" since-version="24"/>
            <field name="unknownb52a8e82" type="Vector3AnimationReferenceV0" since-version="24"/> <!-- default (1.0, 1.0, 1.0)-->
            <field name="unknownbd3f7b5d" type="int32" default-value="-1" />
            <field name="tintFlags" type="uint32" default-value="0">
                <bits>
                    <bit mask="0x1" name="useTint" />
                    <bit mask="0x2" name="tintAlpha" />
                </bits>
            </field>                 
            <field name="tintStrength" type="float" default-value="4.0" />
            <field name="tintStart" type="float" default-value="0.0" />
            <field name="tintCutout" type="float" default-value="1.0" />
            <field name="unknown15" type="float" default-value="1.0" />
            <field name="unknown763da0ad" size="8" expected-value="0x0000000000000000" since-version="25" />
            <field name="unknowncb2ee9e9" type="float" expected-value="1.0" since-version="25" />
            <field name="unknown84f66a3e" type="float" expected-value="1.0" since-version="25" />
            <field name="unknownf3e2933a" type="float" expected-value="1.0" since-version="25" />
            <field name="unknowned0e748d" size="12" expected-value="0x000000000000000000000000" since-version="25" />
        </fields>
    </structure>
  
    <structure name="MAT_" version="15" size="268">
        <description>Standard Material</description>
        <versions>
            <version number="15" size="268" />
            <version number="16" size="280" />
            <version number="17" size="280" />
            <version number="18" size="280" />
        </versions>
        <fields>
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="unknownFlags" type="uint32" default-value="0">
                <bits>
                    <bit mask="0x1" name="unknownFlag0x1" />
                    <bit mask="0x4" name="unknownFlag0x4" />
                    <bit mask="0x8" name="unknownFlag0x8" />
                    <bit mask="0x200" name="unknownFlag0x200" />
                </bits>
            </field>     
            <field name="flags" type="uint32" default-value="0" >
                <bits>
                    <bit mask="0x4" name="unfogged" />
                    <bit mask="0x8" name="twoSided" />
                    <bit mask="0x10" name="unshaded" />
                    <bit mask="0x20" name="noShadowsCast" />
                    <bit mask="0x40" name="noHitTest"/>
                    <bit mask="0x80" name="noShadowsReceived"/>
                    <bit mask="0x100" name="depthPrepass" />
                    <bit mask="0x200" name="useTerrainHDR" />
                    <bit mask="0x800" name="splatUVfix"/>
                    <bit mask="0x1000" name="softBlending"/>
                    <bit mask="0x4000" name="forParticles"/> <!-- maybe -->
                    <bit mask="0x80000" name="darkNormalMapping" />
                    <bit mask="0x80000000" name="visible" /> <!-- in version 18 1, but in version 15 0 -->
                </bits>
            </field>
            <field name="blendMode" type="uint32" />
            <field name="priority" type="int32" />
            <field name="unknown1" type="uint32" default-value="0" />
            <field name="specularity" type="float" />
            <field name="unknown2" type="float" default-value="0.0" />
            <field name="cutoutThresh" type="uint8" default-value="0" />
            <field name="unknownAt41" size="3" expected-value="0x000000" />
            <field name="specMult" type="float" default-value="1.0" />
            <field name="emisMult" type="float" default-value="1.0" />
            <field name="diffuseLayer" type="Reference" refTo="LAYR" />
            <field name="decalLayer" type="Reference" refTo="LAYR" />
            <field name="specularLayer" type="Reference" refTo="LAYR" />
            <field name="glossLayer" type="Reference" refTo="LAYR" since-version="16" />
            <field name="emissiveLayer" type="Reference" refTo="LAYR" />
            <field name="emissive2Layer" type="Reference" refTo="LAYR" />
            <field name="evioLayer" type="Reference" refTo="LAYR" />
            <field name="evioMaskLayer" type="Reference" refTo="LAYR" />
            <field name="alphaMaskLayer" type="Reference" refTo="LAYR" />
            <field name="alphaMask2Layer" type="Reference" refTo="LAYR" />
            <field name="normalLayer" type="Reference" refTo="LAYR" />
            <field name="heightLayer" type="Reference" refTo="LAYR" />
            <field name="unknownLayer1" type="Reference" refTo="LAYR" />
            <field name="unknownLayer2" type="Reference" refTo="LAYR" />
            <field name="unknown3" type="uint32" default-value="0"/>
            <field name="layerBlendType" type="uint32" />
            <field name="emisBlendType" type="uint32" />
            <field name="emisMode" type="uint32" default-value="2" />
            <field name="specType" type="uint32" />
            <field name="unknownAnimationRef1" type="UInt32AnimationReference" />
            <field name="unknownAnimationRef2" type="UInt32AnimationReference" />
        </fields>
    </structure>
    
    <structure name="DIS_">
        <description>
            Displacement Material
        </description>
        <versions>
            <version number="4" size="68" />
        </versions>
        <fields>
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="unknown0" type="uint32" default-value="0" />
            <field name="strengthFactor" type="FloatAnimationReference" />
            <field name="normalLayer" type="Reference" refTo="LAYR" />
            <field name="strengthLayer" type="Reference" refTo="LAYR" />
            <field name="flags" type="uint32" default-value="0" />
            <field name="priority" type="int32" />
        </fields>
    </structure>
    
    <structure name="CMS_">
        <description>Composite Material Section</description>
        <versions>
            <version number="0" size="24" />
        </versions>
        <fields>
            <field name="materialReferenceIndex" type="uint32" />
            <field name="alphaFactor" type="FloatAnimationReference" />
        </fields>
    </structure>
    
    <structure name="CMP_">
        <description>Composite Material</description>
        <versions>
            <version number="2" size="28" />
        </versions>
        <fields>
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="unknown" type="uint32" default-value="0"/> <!-- See: SM_MarSaraBar_00.m3 -->
            <field name="sections" type="Reference" refTo="CMS_" />
        </fields>
    </structure>

    <structure name="TER_">
        <description>Terrain Material</description>
        <versions>
            <version number="0" size="24" />
        </versions>
        <fields>
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="terrainLayer" type="Reference" refTo="LAYR" />
        </fields>
    </structure>
    
    <structure name="VOL_">
        <description>Volume Material</description>
        <versions>
            <version number="0" size="84" />
        </versions>
        <fields>
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="unknown0" type="uint32" default-value="0" /> <!--Mar Sara bar -->
            <field name="unknown1" type="uint32" default-value="0" /> <!--Mar Sara bar -->
            <field name="volumeDensity" type="FloatAnimationReference" />
            <field name="colorDefiningLayer" type="Reference" refTo="LAYR" />
            <field name="unknownLayer1" type="Reference" refTo="LAYR" />
            <field name="unknownLayer2" type="Reference" refTo="LAYR" />
            <field name="unknown2" type="uint32" expected-value="0" />
            <field name="unknown3" type="uint32" expected-value="0x20" />
        </fields>
    </structure>
    
    <structure name="CREP">
        <description>Creep Material</description>
        <versions>
            <version number="0" size="24" />
        </versions>
        <fields>
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="creepLayer" type="Reference" refTo="LAYR" />
        </fields>
    </structure>

    <structure name="SCHR">
        <description>Unknown</description>
        <versions>
            <version number="0" size="12" />
        </versions>
        <fields>
            <field name="path" type="Reference" refTo="CHAR" />
        </fields>
    </structure>

    <structure name="PAR_">
        <description>Particle System</description>
        <versions>
            <version number="12" size="1316" />
            <version number="17" size="1460" />
            <version number="21" size="1464" />
            <version number="22" size="1484" />
        </versions>
        <versions>
            <version number="0" size="" />
        </versions>
        <fields>
            <field name="bone" type="uint32" />
            <field name="materialReferenceIndex" type="uint32" />
            <field name="randomizationFlags" type="uint32" default-value="0" since-version="17" >
                <bits>
                    <bit mask="0x1" name="randomizeWithEmissionSpeed2" />
                    <bit mask="0x2" name="randomizeWithLifespan2" />
                </bits>
            </field>
            <field name="emissionSpeed1" type="FloatAnimationReference" />
            <field name="emissionSpeed2" type="FloatAnimationReference" />
            <field till-version="12" name="randomizeWithEmissionSpeed2" type="uint32" />
            <field name="emissionAngleX" type="FloatAnimationReference" />
            <field name="emissionAngleY" type="FloatAnimationReference" />
            <field name="emissionSpreadX" type="FloatAnimationReference" />
            <field name="emissionSpreadY" type="FloatAnimationReference" />
            <field name="lifespan1" type="FloatAnimationReference" />
            <field name="lifespan2" type="FloatAnimationReference" />
            <field till-version="12" name="randomizeWithLifespan2" type="uint32" />
            <field name="unknownf21cc980" size="12" expected-value="0x000000000000000000000000" />
            <field name="unknown82a208f7" size="4" default-value="0x00000000" since-version="17" />
            <field name="unknown93aad73b" type="float" default-value="0.0" since-version="17" />
            <field name="zAcceleration" type="float" />
            <field name="sizeAnimationMiddle" type="float" default-value="0.5" />
            <field name="colorAnimationMiddle" type="float" default-value="0.5" />
            <field name="alphaAnimationMiddle" type="float" default-value="0.5" />
            <field name="rotationAnimationMiddle" type="float" default-value="0.5" />
            <field name="unknown74620ffe" type="float" default-value="0.0" since-version="17" />
            <field name="unknown1525cb58" type="float" default-value="0.0" since-version="17" />
            <field name="particleSizes1" type="Vector3AnimationReferenceV0" />
            <field name="rotationValues1" type="Vector3AnimationReferenceV0" />
            <field name="initialColor1" type="ColorAnimationReference" />
            <field name="middleColor1" type="ColorAnimationReference" />
            <field name="finalColor1" type="ColorAnimationReference" />
            <field name="slowdown" type="float" />
            <field name="unknownFloat2a" type="float" default-value="0.0" />
            <field name="unknownFloat2b" type="float" default-value="1.0"/> <!-- external force strength?-->
            <field name="unknownFloat2c" type="float" default-value="1.0"/>
            <field name="unknown4" type="float" default-value="0.0" />
            <field name="trailingEnabled" type="uint32" />
            <field name="forceChannels" type="uint32" default-value="0" />
            <!-- forceChannelsCopy seems to have the same value as forceChannels --> 
            <field till-version="12" name="forceChannelsCopy" type="uint32" default-value="0" />
            <field name="unknownFloat3a" type="float" default-value="0.0" />
            <field name="unknownFloat3b" type="float" default-value="0.0" />
            <field name="unknownFloat3c" type="float" default-value="0.0" />
            <field till-version="12" name="unknownFloat3d" type="float" default-value="0.1" />
            <field name="indexPlusHighestIndex" type="uint32" />
            <field name="maxParticles" type="uint32" />
            <field name="emissionRate" type="FloatAnimationReference" />
            <field name="emissionAreaType" type="uint32" />
            <field name="emissionAreaSize" type="Vector3AnimationReferenceV0" />
            <field name="tailUnk1" type="Vector3AnimationReferenceV0" />
            <field name="emissionAreaRadius" type="FloatAnimationReference" />
            <field name="spreadUnk" type="FloatAnimationReference" />
            <field name="unknown51fe79f5" size="12" expected-value="0x000000000000000000000000" since-version="17" />
            <field name="emissionType" type="uint32" />
            <field name="randomizeWithParticleSizes2" type="uint32" />
            <field name="particleSizes2" type="Vector3AnimationReferenceV0" />
            <field name="randomizeWithRotationValues2" type="uint32" />
            <field name="rotationValues2" type="Vector3AnimationReferenceV0" />
            <field name="randomizeWithColor2" type="uint32" />
            <field name="initialColor2" type="ColorAnimationReference" />
            <field name="middleColor2" type="ColorAnimationReference" />
            <field name="finalColor2" type="ColorAnimationReference" />
            <field name="unknown7" type="uint32" default-value="0" />
            <field name="partEmit" type="Int16AnimationReference" />
            <field name="phase1StartImageIndex" type="uint8"  default-value="0" />
            <field name="phase1EndImageIndex" type="uint8"  default-value="0" />
            <field name="phase2EndImageIndex" type="uint8" default-value="0" />
            <field name="phase2StartImageIndex" type="uint8" expected-value="0" />
            <field name="relativePhase1Length" type="float" />
            <field name="numberOfColumns" type="uint16" />
            <field name="numberOfRows" type="uint16" />
            <field name="columnWidth" type="float" default-value="inf" />
            <field name="rowHeight" type="float" default-value="inf" />
            <field name="unknownFloat4" type="float" default-value="0.0" />
            <field name="unknownFloat5" type="float" default-value="1.0"/>
            <field name="unknown9" type="int32" default-value="-1" />
            <field name="unknown700df5cf" size="20"/>
            <!-- particleType: 
            0,2,3,4,5=Square Billbords ?
            1= Speed Scaled and Rotated Billbords influenced by lengthWidhtRatio 
            6 = Rectangular Billbords (see lengthWidthRatio)
            7 = Quads with speed as normal
            9 = Quads that scratches between spawn point and current location
            -->
            <field name="particleType" type="uint32"/>
            <field name="lengthWidthRatio" type="float" default-value="1.0" />
            <field name="unknown11" size="8" default-value="0x0000000000000000" />
            <field name="unknownFloat7" type="float" default-value="1.0"/>
            <field name="unknown5AddedV21" type="float"  default-value="1.0" since-version="17" />
            <field name="unknown9ffad0f0" type="uint32" default-value="0" />
            <field name="unknowne0bd54c8" type="FloatAnimationReference" />
            <field name="unknowna2d44d80" type="FloatAnimationReference" />
            <field name="unknownb6d53a88" type="uint32" default-value="0" />
            <field name="unknownf8e2b3d0" type="FloatAnimationReference" />
            <field name="unknown54f4ae30" type="FloatAnimationReference" />
            <field name="unknownf8b3d529" type="uint32" default-value="0" />
            <field name="unknown5f54fb02" type="FloatAnimationReference"/>           
            <field name="unknown84d843d6" type="FloatAnimationReference" />
            <field name="unknown6b3b9f9" size="4" expected-value="0x00000000" />
            <field name="unknown9cb3dd18" type="FloatAnimationReference" />
            <field name="unknown2e01be90" type="FloatAnimationReference" />
            <field name="unknowneff4c5be" size="4" expected-value="0x00000000"  />
            <field name="unknownf6193fc0" type="FloatAnimationReference" />
            <field name="unknowna5e2260a" type="FloatAnimationReference" />
            <field name="unknown9aa3bbb9" size="4" expected-value="0x00000000" />
            <field name="unknown485f7eea" type="AnimationReferenceHeader" />
            <field name="initOfUnknown485f7eea" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown485f7eea" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown485f7eea" size="4" default-value="0xffffffff" />  
            <field name="unknown34b6f141" type="AnimationReferenceHeader" />
            <field name="initOfUnknown34b6f141" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown34b6f141" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown34b6f141" size="4" default-value="0xffffffff" />  
            <field name="unknownb69653a4" size="4" expected-value="0x00000000" />
            <field name="unknown89cdf966" type="AnimationReferenceHeader" />
            <field name="initOfUnknown89cdf966" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown89cdf966" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown89cdf966" size="4" default-value="0xffffffff" />
            <field name="unknown4eefdfc1" type="AnimationReferenceHeader" />
            <field name="initOfUnknown4eefdfc1" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown4eefdfc1" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown4eefdfc1" size="4" default-value="0xffffffff" />
            <field name="unknownb47e5f82" size="4" default-value="0x00000000" />
            <field name="unknownab37a1d5" type="AnimationReferenceHeader" />
            <field name="initOfUnknownab37a1d5" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknownab37a1d5" size="4" expected-value="0x00000000" />
            <field name="endOfUnknownab37a1d5" size="4" default-value="0xffffffff" />
            <field name="unknownbef7f4d3" type="AnimationReferenceHeader" />
            <field name="initOfUnknownbef7f4d3" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknownbef7f4d3" size="4" expected-value="0x00000000" />
            <field name="endOfUnknownbef7f4d3" size="4" default-value="0xffffffff" />
            <field name="unknown8262f69c" size="4" default-value="0x00000000" />
            <field name="unknownb2dbf2f3" type="AnimationReferenceHeader"  />
            <field name="initOfUnknownb2dbf2f3" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknownb2dbf2f3" size="4" expected-value="0x00000000" />
            <field name="endOfUnknownb2dbf2f3" size="4" default-value="0xffffffff" />
            <field name="unknown3c76d64c" type="AnimationReferenceHeader" />
            <field name="initOfUnknown3c76d64c" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown3c76d64c" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown3c76d64c" size="4" default-value="0xffffffff" />
            <field name="unknownbc151e17" type="FloatAnimationReference" />
            <field name="unknown8f507b52" type="AnimationReferenceHeader" since-version="22" />
            <field name="initOfUnknown8f507b52" size="4" expected-value="0x00000000" since-version="22" />
            <field name="nullOfUnknown8f507b52" size="4" expected-value="0x00000000" since-version="22" />
            <field name="endOfUnknown8f507b52" size="4" expected-value="0xffffffff" since-version="22" />            
            <field name="flags" type="uint32" default-value="0" >
                <bits>
                    <bit mask="0x1" name="sort" />
                    <bit mask="0x2" name="collideTerrain" />
                    <bit mask="0x4" name="collideObjects" />
                    <bit mask="0x8" name="spawnOnBounce" />
                    <bit mask="0x10" name="useInnerShape" />
                    <bit mask="0x20" name="inheritEmissionParams" />
                    <bit mask="0x40" name="inheritParentVel"/>
                    <bit mask="0x80" name="sortByZHeight"/>
                    <bit mask="0x100" name="reverseIteration" />
                    <bit mask="0x200" name="smoothRotation" />
                    <bit mask="0x400" name="bezSmoothRotation"/>
                    <bit mask="0x800" name="smoothSize"/>
                    <bit mask="0x1000" name="bezSmoothSize"/>
                    <bit mask="0x2000" name="smoothColor"/>
                    <bit mask="0x4000" name="bezSmoothColor"/>
                    <bit mask="0x8000" name="litParts"/>
                    <bit mask="0x10000" name="randFlipBookStart"/>
                    <bit mask="0x20000" name="multiplyByGravity"/>
                    <bit mask="0x40000" name="clampTailParts"/>
                    <bit mask="0x80000" name="spawnTrailingParts"/>
                    <bit mask="0x100000" name="fixLengthTailParts"/>
                    <bit mask="0x200000" name="useVertexAlpha"/>
                    <bit mask="0x400000" name="modelParts"/>
                    <bit mask="0x800000" name="swapYZonModelParts"/>
                    <bit mask="0x1000000" name="scaleTimeByParent"/>
                    <bit mask="0x2000000" name="useLocalTime"/>
                    <bit mask="0x4000000" name="simulateOnInit"/>
                    <bit mask="0x8000000" name="copy"/>
                </bits>
            </field>
            <!-- unknowne51f8f9b  had the values 4 and  7-->
            <field name="unknowne51f8f9b" type="uint32" default-value="4" since-version="21" />
            <field name="unknown25dac4d2"  type="uint32" default-value="3" since-version="17" />
            <field name="sizeSmoothing" type="uint8" default-alue="0" since-version="17" />
            <field name="unknown56dbedec" size="7"  expected-value="0x00000000000000" since-version="17" />
            <field name="unknown22856fde" type="FloatAnimationReference" since-version="17" />
            <field name="unknownb35ad6e1" type="Vector2AnimationReferenceV0" since-version="17" />
            <field name="unknown686e5943" type="Vector3AnimationReferenceV0" since-version="17" />
            <field name="unknown18a90564" type="Vector2AnimationReferenceV0" since-version="17" /> <!-- with init=(1.0, 1.0) and null=(1.0, 1.0)-->
            <field name="unknown22fec01a" type="Reference" refTo="SVC3" />
            <field name="unknown105fd76d" type="float" default-value="0.0"/>
            <!--unknown5156cf07 Observed values: 2 and 0 -->
            <field name="unknown5156cf07" type="uint32" default-value="2"/>
            <!-- unknown92dba6ab Observed values: 0 and 1 -->
            <field name="unknown92dba6ab" type="uint32" default-value="1"/>
            <field name="unknown21ca0cea" type="AnimationReferenceHeader" />
            <field name="initOfUnknown21ca0cea" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown21ca0cea" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown21ca0cea" size="4" default-value="0xffffffff" />
            <field name="unknown1e97145f" type="FloatAnimationReference" /> <!-- default 1.0 -->
            <field name="unknown1b8e6ea3" size="4" expected-value="0xffffffff"/>
            <field name="unknown19a25d40" type="float" default-value="0.0"/>
            <field name="unknownd3bfa169" type="FloatAnimationReference" />
            <field name="unknownfdab7ff3" size="8" expected-value="0xffffffff00000000"/>
            <field name="usedModel" size="12" type="Reference" refTo="SCHR" /> 
            <field name="copyIndices" size="12" type="Reference"  refTo="U32_" />
        </fields>
    </structure>
    
    <structure name="PARC">
        <description>
            Particle System Copy/Instance
        </description>
        <versions>
            <version number="0" size="40" />
        </versions>
        <fields>
            <field name="emissionRate" type="FloatAnimationReference" />
            <field name="partEmit" type="Int16AnimationReference" />
            <field name="bone" type="uint32" />
        </fields>
    </structure>
    
    <structure name="PROJ">
        <description>Projections</description>
        <versions>
            <version number="4" size="388" />
            <version number="5" size="388" />
        </versions>
        <fields>
            <field name="unknown5b4bb38c" type="uint32" expected-value="1" />
            <field name="boneIndex" type="uint32" />
            <field name="materialReferenceIndex" type="uint32" /><!-- maybe -->>
            <field name="unknownbbe33f90" type="AnimationReferenceHeader" />
            <field name="initOfUnknowndbbe33f90" size="12" expected-value="0x000000000000000000000000" />
            <field name="nullOfUnknowndbbe33f90" size="12" expected-value="0x000000000000000000000000" />
            <field name="endOfUnknownbbe33f90" size="4" default-value="0xffffffff" />
            <field name="unknown9d264f5b" type="AnimationReferenceHeader" />
            <field name="initOfUnknown9d264f5b" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown9d264f5b" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown9d264f5b" size="4" default-value="0xffffffff" />
            <field name="unknown66ebe1e2" type="AnimationReferenceHeader" />
            <field name="initOfUnknown66ebe1e2" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown66ebe1e2" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown66ebe1e2" size="4" default-value="0xffffffff" />
            <field name="unknowndf06caf9" type="AnimationReferenceHeader" />
            <field name="initOfUnknowncda1e09c" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknowncda1e09c" size="4" expected-value="0x00000000" />
            <field name="endOfUnknowncda1e09c" size="4" default-value="0xffffffff" />
            <field name="unknown7efe2497" type="AnimationReferenceHeader" />
            <field name="initOfUnknown7efe2497" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown7efe2497" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown7efe2497" size="4" default-value="0xffffffff" />
            <field name="unknown8d88a239" type="AnimationReferenceHeader" />
            <field name="initOfUnknown8d88a239" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown8d88a239" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown8d88a239" size="4" default-value="0xffffffff" />
            <field name="unknowne82404f6" type="AnimationReferenceHeader" />
            <field name="initOfUnknowne82404f6" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknowne82404f6" size="4" expected-value="0x00000000" />
            <field name="endOfUnknowne82404f6" size="4" default-value="0xffffffff" />
            <field name="unknown13e470c5" type="AnimationReferenceHeader" />
            <field name="initOfUnknown13e470c5" size="4" expected-value="0x00000000" />
            <field name="nullOfUnknown13e470c5" size="4" expected-value="0x00000000" />
            <field name="endOfUnknown13e470c5" size="4" default-value="0xffffffff" />
            <field name="unknown59478ee7" type="FloatAnimationReference" />
            <field name="unknowne0b23113" type="FloatAnimationReference" />
            <field name="unknown8d892963" type="FloatAnimationReference" />
            <field name="unknown85cba5dc" type="FloatAnimationReference" />
            <field name="unknown34a38463" type="FloatAnimationReference" />
            <field name="unknownf7351664" type="FloatAnimationReference" />
            <field name="unknownc0972eaf" size="4" expected-value="0x00000000"/>
            <field name="unknowna01217c1" type="float" default-value="1.0" />
            <field name="unknowne6644c96" type="float" default-value="1.0"  />
            <field name="unknown1a597211" type="float" default-value="0.8" />
            <field name="unknown7d90d255" type="float" default-value="0.8" />
            <field name="unknowne243c135" size="4" expected-value="0x00000000"/>
            <field name="unknownbf38195c" type="float" defeault-value="10.0" />
            <field name="unknown55fd8fa6" size="4" expected-value="0x00000000"/>
            <field name="unknown1c58f255" type="float" defeault-value="5.0" />
            <field name="unknowne4fcbb89" size="4" expected-value="0x00000000"/>
            <field name="unknown15aa6267" type="float" defeault-value="4.0" />
            <field name="unknown44efb863" type="FlagAnimationReference" />
            <field name="unknownef7b512d" type="uint32" default-value="0"/>
            <field name="unknown9588cd5c" type="uint32" default-value="1" />
            <field name="unknown8c22e18e" type="uint32" default-value="0" />
            <field name="unknownbc4eef42" type="uint32" default-value="0" />
        </fields>
    </structure>
    
    <structure name="PHYJ">
        <description>Physical Joins</description>
        <versions>
            <version number="0" size="180" />
        </versions>
        <fields>
            <field name="unknown" size="180" />
        </fields>
    </structure>
    
    <structure  name="FOR_">
        <description>
            Force that effects particles of certain particle systems
        </description>
        <versions>
            <version number="1" size="104" />
        </versions>
        <fields>
            <field name="forceType" type="uint32" />
            <field name="unknownAt4" type="uint32" expected-value="0" />
            <field name="unknownAt8" type="uint32" default-value="0" />
            <field name="boneIndex" type="uint32" />
            <field name="unknownAt16" type="uint32" default-value="0" />
            <field name="forceChannels" type="uint32"/>
            <field name="forceStrength" type="FloatAnimationReference" />
            <field name="forceRange" type="FloatAnimationReference" />
            <field name="unknownAt64" type="FloatAnimationReference" />
            <field name="unknownAt84" type="FloatAnimationReference" />
        </fields>
    </structure>
    
    <structure name="DMSE">
        <description>Unknown structure</description>
        <versions>
            <version number="0" size="4" />
        </versions>
        <fields>
            <field name="unknown" type="int8" />
            <field name="i0" type="uint8" />
            <field name="i1" type="uint8" />
            <field name="i2" type="uint8" />
        </fields>
    </structure>
    
    <structure name="PHSH">
        <description>Physics shape data</description>
        <versions>
            <version number="1" size="132" />
            <version number="3" size="300" />
        </versions>
        <fields>
            <field name="matrix" type="Matrix44" />
            <field till-version="1" name="unknownAt64" type="uint32" default-value="0x3ca14285" />
            <!-- Shape types:
                0 = box
                1 = sphere
                2 = capsule
                3 = cylinder
                4 = convex hull
                5 = mesh
                6+ = invalid
            -->
            <field till-version="1" name="shape" type="uint8" />
            <!-- Is not always 0. It's propably the unintialized part of shape: -->
            <field till-version="1" name="unknown1c286108" type="uint8" default-value="0" />
            <field till-version="1" name="unknown4ddf14b3" type="uint16" default-value="0" />
            <!-- assuming the field is fixed in version 3: -->
            <field name="shape" type="uint32" since-version="3" />
            <field till-version="1" name="vertices" type="SmallReference" refTo="VEC3" />
            <!-- Belongs to the previous reference and seems not be get properly initialized with 0: -->
            <field till-version="1" name="uninitializedFieldAt80" type="uint32" default-value="0" />
            <field till-version="1" name="unknownAt84" type="SmallReference" refTo="U8__"/>
            <!-- Belongs to the previous reference and seems to be uninitialized. -->
            <field till-version="1" name="uninitializedFieldAt92" type="uint32" default-value="0" />
            <field till-version="1" name="faces" type="SmallReference" refTo="U16_" />
            <!-- Belongs to the previous reference and seems not be get properly initialized with 0: -->
            <field till-version="1" name="uninitializedFieldAt104" type="uint32" default-value="0" />
            <!-- Bounding planes used for convex hull shapes? (may include extra radius value?) -->
            <field till-version="1" name="planeEquations" type="SmallReference" refTo="VEC4" />
            <!-- Belongs to the previous reference and seems not be get properly initialized with 0: -->
            <field till-version="1" name="uninitializedFieldAt116" type="uint32" default-value="0" />
            <field name="unknown66ce545e" size="24" expected-value="0x000000000000000000000000000000000000000000000000" since-version="3" />
            <field name="size0" type="float" default-value="1.0" /> <!-- box x-size / capsule radius (/ cylinder radius / sphere radius?) -->
            <field name="size1" type="float" default-value="1.0" /> <!-- box y-size / capsule length (/ cylinder length?) -->
            <field name="size2" type="float" default-value="1.0" /> <!-- box z-size -->
            <field name="unknown71459989" type="Reference" refTo="VEC3" since-version="3" />
            <field name="unknown46c85f1e" type="Reference" refTo="VEC4" since-version="3" />
            <field name="unknown4f8176e7" type="Reference" refTo="DMSE" since-version="3" />
            <field name="unknown124fad04" type="Reference" refTo="U8__" since-version="3" />
            <field name="unknownbda8f787" size="12" default-value="0x000000000000000000000000" since-version="3" />
            <!-- unknown2e655ca4 can have the value 0x80000000 too -->
            <field name="unknown2e655ca4" size="4" since-version="3" />
            <!-- unknown7df99f73 is not a float and has strange content -->
            <field name="unknown7df99f73" size="4" since-version="3" />
            <field name="unknown5c04305e" size="4" default-value="0x00000000" since-version="3" />
            <!-- unknown8d41b3f8 is not a float and has strange content -->
            <field name="unknown8d41b3f8" size="4" since-version="3" />
            <!-- unknown56fece2 is not a float and has strange content -->
            <field name="unknown56fece2" size="4" since-version="3" />
            <field name="unknown6a9914ac" size="84" expected-value="0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" since-version="3" />
            <field name="unknown9d115fa7" size="4" since-version="3" />
            <!-- unknown9aea956e is not a float and has strange content -->
            <field name="unknown9aea956e" size="4" since-version="3" />
            <field name="unknown17c6f44e" size="4" expected-value="0x00000000" since-version="3" />
            <field name="unknowne444b392" size="4" since-version="3" />
            <field name="unknown32885641" size="4" expected-value="0x00000000" since-version="3" />
            <!-- unknown721b9a99 is not a float and has strange content-->
            <field name="unknown721b9a99" size="4" since-version="3" />
            <!-- unknowna495c84b is not a float and has strange content-->
            <field name="unknowna495c84b" size="4" since-version="3" />
            <!-- unknown12e15bc4 is not a float and has strange content-->
            <field name="unknown12e15bc4" size="4" since-version="3" />
        </fields>
    </structure>

    <structure name="PHRB" version="2" size="104" >
        <description>Rigid Body</description>
        <versions>
            <version number="2" size="104" />
            <version number="4" size="80" />
        </versions>
        <fields>
            <!-- Version 2 specific part: (please try to minimize it if possible) -->
            <field till-version="2" name="unknownAt0" type="float" default-value="5.0" />
            <field till-version="2" name="unknownAt4" type="float" default-value="4.0" />
            <field till-version="2" name="unknownAt8" type="float" default-value="0.8" /> <!-- 0.8 in all models? -->
            <field till-version="2" name="unknownAt12" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt16" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt20" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt24" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt28" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt32" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt36" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt40" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt44" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt48" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt52" type="float" default-value="0.0" />
            <field till-version="2" name="unknownAt56" type="float" default-value="0.0" />
            <field till-version="2" name="boneIndex" type="uint16" />
            <field till-version="2" name="boneIndexUnused" type="uint16" default-value="0x0" /> <!-- Matches boneLookup, but doesn't seem to be used? -->
            <field till-version="2" name="unknownAt64" size="16" default-value="0x00000000000000000000000000000000" />
            
            <!-- Version 4 specific part: (please try to minimize it if possible)-->
            <field name="unknown7ee981a1" type="uint16" expected-value="1" since-version="4" />
            <field name="unknown9a561188" type="uint16" default-value="0" since-version="4" />
            <field name="boneIndex" type="uint32" since-version="4" />
            <field name="unknown6fe32955" type="float" default-value="2400.0" since-version="4" />
            <field name="unknownf4a3152b" type="float" default-value="0.7" since-version="4" />
            <field name="unknown1cde99d0" type="float" default-value="0.1"  since-version="4" />
            <field name="unknown85048243" type="float" default-value="0.001"  since-version="4" />
            <field name="unknowna5f8324d" type="float" default-value="0.001" since-version="4" />
            <field name="unknown1b54daab" type="float" default-value="1.0"  since-version="4" />
            <field name="unknown8de065e8" type="AnimationReferenceHeader" since-version="4" />
            <field name="unknown568ae4f7" type="uint32" since-version="4"/>
            <field name="unknown82406bbb" size="4" expected-value="0x00000000" since-version="4" />
            <field name="unknownac1544c0" size="4" expected-value="0xffffffff" since-version="4" />
            <field name="unknown57796a4d" type="float" default-value="1.0" since-version="4"/>
            <field name="physicsShapes" type="Reference" refTo="PHSH" />
            <field name="flags" type="uint32" default-value="0x1">
                <bits>
                    <bit mask="0x1" name="collidable" />
                    <bit mask="0x2" name="walkable" />
                    <bit mask="0x4" name="stackable" />
                    <bit mask="0x8" name="simulateOnCollision" />
                    <bit mask="0x10" name="ignoreLocalBodies" />
                    <bit mask="0x20" name="alwaysExists" />
                    <bit mask="0x80" name="doNotSimulate" />
                </bits>
            </field>
            <field name="localForces" type="uint16" default-value="0x0">
                <bits>
                    <bit mask="0x1" name="1" />
                    <bit mask="0x2" name="2" />
                    <bit mask="0x4" name="3" />
                    <bit mask="0x8" name="4" />
                    <bit mask="0x10" name="5" />
                    <bit mask="0x20" name="6" />
                    <bit mask="0x40" name="7" />
                    <bit mask="0x80" name="8" />
                    <bit mask="0x100" name="9" />
                    <bit mask="0x200" name="10" />
                    <bit mask="0x400" name="11" />
                    <bit mask="0x800" name="12" />
                    <bit mask="0x1000" name="13" />
                    <bit mask="0x2000" name="14" />
                    <bit mask="0x4000" name="15" />
                    <bit mask="0x8000" name="16" />
                </bits>
            </field>
            <field name="worldForces" type="uint16" default-value="0x0">
                <bits>
                    <bit mask="0x1" name="wind" />
                    <bit mask="0x2" name="explosion" />
                    <bit mask="0x4" name="energy" />
                    <bit mask="0x8" name="blood" />
                    <bit mask="0x10" name="magnetic" />
                    <bit mask="0x20" name="grass" />
                    <bit mask="0x40" name="brush" />
                    <bit mask="0x80" name="trees" />
                </bits>
            </field>
            <field name="priority" type="uint32" default-value="0" />
        </fields>
    </structure>
    
    <structure name="SSGS" >
        <description>
            Describes a super simple geometic shape
            
            0 = Cuboid (width=size0, length=size1, height=size2)
            1 = Sphere (radius=size0)
            2 = Cylinder? (radius=size0, height=size1)) 
        </description>
        <versions>
            <version number="1" size="108" />
        </versions>
        <fields>
            <field name="shape" type="uint32" />
            <field name="boneIndex" type="int16" /><!-- can be -1 -->
            <field name="uknownAt6" type="uint16" expected-value="0" />
            <field name="matrix" type="Matrix44" />
            <field name="uknownAt72" type="uint32" expected-value="0" />
            <field name="uknownAt76" type="uint32" expected-value="0" />
            <field name="uknownAt80" type="uint32" expected-value="0" />
            <field name="uknownAt84" type="uint32" expected-value="0" />
            <field name="uknownAt88" type="uint32" expected-value="0" />
            <field name="uknownAt92" type="uint32" expected-value="0" />
            <field name="size0" type="float" />
            <field name="size1" type="float" />
            <field name="size2" type="float" />
        </fields>
    </structure>

    <structure name="ATVL">
        <description>
            Attachment Volume
            
            The type attribute specifies the meaning of the size values:
            
            0 = Cuboid (width=size0, length=size1, height=size2)
            1 = Sphere (radius=size0)
            2 = Cylinder (radius=size0, height=size1)) 
        </description>
        <versions>
            <version number="0" size="116" />
        </versions>
        <fields>
            <field name="bone0" type="uint32" />
            <field name="bone1" type="uint32"/>
            <field name="type" type="uint32" default-value="1" />
            <field name="bone2" type="uint32"/>
            <field name="matrix" type="Matrix44"/>
            <field name="unknown0" type="Reference" refTo="VEC3" />
            <field name="unknown1" type="Reference" refTo="U16_" />
            <field name="size0" type="float"/>
            <field name="size1" type="float" default-value="0.0" />
            <field name="size2" type="float" default-value="0.0" />
        </fields>
    </structure>

    <structure name="BBSC">
        <description>
            Unknown
        </description>
        <versions>
            <version number="0" size="48" />
        </versions>
        <fields>
            <field name="unknown" size="48" />
        </fields>
    </structure>
    
    <structure name="SRIB">
        <description>
            Unknown
        </description>
        <versions>
            <version number="0" size="272" />
        </versions>
        <fields>
            <field name="unknown" size="272" />
        </fields>
    </structure>
    
    <structure name="RIB_">
        <description>
            Ribbon effect.
            0 - PlanarBillboarded
            1 - Planar
            2 - Cylinder
            3 - Star Shaped
        </description>
        <versions>
            <version number="6" size="748" />
            <version number="8" size="756" />
        </versions>
        <fields>
            <field name="boneIndex" type="uint8" />
            <field name="short1" type="uint8" expected-value="0"/>
            <field name="short2" type="uint8" expected-value="0"/>
            <field name="short3" type="uint8" expected-value="0"/>
            <field name="materialReferenceIndex" type="uint32" />
            <field name="unknown1f9302c9" type="uint32" default-value="0" since-version="8" />
            <field name="waveLength" type="FloatAnimationReference" />
            <field name="unkonwne773692a" type="AnimationReferenceHeader"/>
            <field name="unkonwne53650fa" size="4" default-value="0x00000000" />
            <field name="unkonwne9c6b307" size="4" expected-value="0x00000000" />
            <!-- unknown75e0b576 is the uninitalized field that terminated a animaation reference : -->
            <field name="unknown75e0b576" type="uint32" default-value="0"/>
            <field till-version="6" name="unknownd30655aa" type="int32" default-value="0"/>
            <field name="unknown8940c27c" type="FloatAnimationReference" />
            <field name="unknownc2ab76c5" type="FloatAnimationReference" />
            <field name="unknownee00ae0a" type="FloatAnimationReference" />
            <field name="unknown1686c0b7" type="FloatAnimationReference" />
            <field name="unknowne48f8f84" type="FloatAnimationReference" />
            <field name="unknown9eba8df8" type="FloatAnimationReference" />
            <field name="unknown26271cbe" type="uint32" expected-value="0"/>
            <field name="unknownda0542fa" type="uint32" expected-value="0" />
            <field name="unknown76f48851" type="float" expected-value="0"/>
            <field name="unknownfe32e718" type="float" default-value="0"/>
            <field name="tipOffsetZ" type="float" />
            <field name="centerBias" type="float" /> <!--middle point position-->
            <field name="unknowncae7b5f7" type="float" default-value="1.0" />
            <field name="unknown8652c547" type="float" default-value="1.0" />
            <field name="unknown6a1cb998" type="float" default-value="1.0" />
            <field name="unknownbca99a4e" size="12" since-version="8" />
            <field name="radiusScale" type="Vector3AnimationReferenceV0" /> <!--X=Start, Y=Middle, Z=END-->
            <field name="twist" type="FloatAnimationReference" />
            <field name="unknown504bc931" type="uint32" expected-value="0"/>
            <field name="unknown8cfd3002" type="uint32" expected-value="0"/>
            <field name="unknown2bfdc3e9" type="uint32" expected-value="0"/>
            <field name="unknownb8fe150a" type="uint32" default-value="0"/>
            <field name="baseColoring" type="ColorAnimationReference" />
            <field name="centerColoring" type="ColorAnimationReference" />
            <field name="tipColoring" type="ColorAnimationReference" />
            <field name="stretchAmount" type="float" />
            <field till-version="6" name="unknownb41d7d03" type="float" expected-value="0.0"/>
            <field name="unknownb41d7d03" type="float" expected-value="1.0" since-version="8"/>
            <field name="stretchLimit" type="float" />
            <field name="unknownc7004d01" type="float" default-value="0.0"/>
            <field name="unknown44a749fe" type="float" default-value="0.0"/>
            <field name="unknown64a0477a" type="uint32" default-value="1"/> <!-- gateway0-->
            <field till-version="6" name="unknown20683e1b" type="uint32" default-value="0"/> <!--overseer2-->
            <field till-version="6" name="unknowndf1a587b" type="uint32" default-value="0"/> <!--overseer2-->
            <field name="surfaceNoiseAmplitude" type="float" />
            <field name="surfaceNoiseNumberOfWaves" type="float" />
            <field name="surfaceNoiseFrequency" type="float" />
            <field name="surfaceNoiseScale" type="float" />
            <field name="unknownafa854b0" type="uint32" /> <!--corruptor3, corruption battlecruiser5-->
            <field name="ribbonType" type="uint32" />
            <field name="unknownbf0eb4d1" type="uint32" default-value="1"/>
            <field name="ribbonDivisions" type="float" />
            <field name="ribbonSides" type="uint32" />
            <field name="unknowna5803a0e" type="float" default-value="0.5"/>
            <field name="ribbonLength" type="FloatAnimationReference" />
            <field till-version="6"  name="filler1" type="int32" default-value="0"/>
            <field name="sribData" type="Reference" refTo="SRIB" />
            <field name="unknown7e341928" type="AnimationReferenceHeader" />
            <field name="unknown34b7bf34" type="uint32" default-value="1"/>
            <field name="unknownf2b8c436" type="int32" default-value="0"/>
            <field name="unknown96098e64" type="uint32" default-value="0"/>
            <field name="flags" type="uint32" default-value="0" >
                <bits>
                    <bit mask="0x2" name="collideWithTerrain" />
                    <bit mask="0x4" name="collideWithObjects" />
                    <bit mask="0x8" name="edgeFalloff" />
                    <bit mask="0x10" name="inheritParentVelocity" />
                    <bit mask="0x20" name="smoothSize" />
                    <bit mask="0x40" name="bezierSmoothSize" />
                    <bit mask="0x80" name="useVertexAlpha" />
                    <bit mask="0x100" name="scaleTimeByParent" />
                    <bit mask="0x200" name="forceLegacy" />
                    <bit mask="0x400" name="useLocaleTime" />
                    <bit mask="0x800" name="simulateOnInitialization" />
                    <bit mask="0x1000" name="useLengthAndTime" />
                </bits>
            </field>
            <field name="unknown30e0264e" type="uint32" default-value="0"/>
            <field name="unknown40ffe7f5" type="float" default-value="0.0"/>
            <field name="unknown39b23b19" type="uint32" default-value="2"/>
            <field name="unknown72f948ba" type="uint32" default-value="0"/> <!--hydralisk death 2-->
            <field name="unknownbccd0332" size="8" since-version="8" />
            <field name="directionVariationBool" type="uint32" />
            <field name="directionVariationAmount" type="FloatAnimationReference" />
            <field name="directionVariationFrequency" type="FloatAnimationReference" />
            <field name="amplitudeVariationBool" type="uint32" />
            <field name="amplitudeVariationAmount" type="FloatAnimationReference" />
            <field name="amplitudeVariationFrequency" type="FloatAnimationReference" />
            <field name="lengthVariationBool" type="uint32" />
            <field name="lengthVariationAmount" type="FloatAnimationReference" />
            <field name="lengthVariationFrequency" type="FloatAnimationReference" />
            <field name="radiusVariationBool" type="uint32" />
            <field name="radiusVariationAmount" type="FloatAnimationReference" />
            <field name="radiusVariationFrequency" type="FloatAnimationReference" />
            <field name="unknown3e06cbc8" type="int32" default-value="0"/>
            <field name="unknown4904046f" type="FloatAnimationReference" />
            <field name="unknowna69b9387" type="FloatAnimationReference" />
            <field name="unknown9a4a649a" type="FloatAnimationReference" />
            <field name="unknown76569e33" type="FloatAnimationReference" />
        </fields>
    </structure>

    <structure name="IKJT" >
        <description>
            Unknown
        </description>
        <versions>
            <version number="0" size="32" />
        </versions>
        <fields>
            <field name="unknown" size="32" />
        </fields>
    </structure>

    <structure name="SHBX" >
        <description>
            Unknown
        </description>
        <versions>
            <version number="0" size="64" />
        </versions>
        <fields>
        <field name="unknown" size="64" />
        </fields>
    </structure>
    
    <structure name="CAM_">
        <description>
            Camera
        </description>
        <versions>
            <version number="3" size="180" />
        </versions>
        <fields>
            <field name="boneIndex" type="uint32" />
            <field name="name" type="Reference" refTo="CHAR" />
            <field name="fieldOfView" type="FloatAnimationReference" />
            <field name="unknown" type="uint32" default-value="1"/>
            <field name="farClip" type="FloatAnimationReference" />
            <field name="nearClip" type="FloatAnimationReference" />
            <field name="clip2" type="FloatAnimationReference" />
            <field name="focalDepth" type="FloatAnimationReference" />
            <field name="falloffStart" type="FloatAnimationReference" />
            <field name="falloffEnd" type="FloatAnimationReference" />
            <field name="depthOfField" type="FloatAnimationReference" />
        </fields>
    </structure>

    <structure name="MODL" >
        <description>
            Describes the content of the file.
            bone must have same size like IREF
        </description>
        <versions>
            <version number="23" size="784" />
            <version number="25" size="808" />
            <version number="26" size="820" />
        </versions>
        <fields>
            <field name="modelName" type="Reference" refTo="CHAR"/>
            <field name="flags" type="uint32" default-value="0x80d53">
                <bits>
                    <bit mask="0x100000" name="hasMesh" />
                </bits>
            </field>
            <field name="sequences" type="Reference" refTo="SEQS"  />
            <field name="sequenceTransformationCollections" type="Reference" refTo="STC_" />
            <field name="sequenceTransformationGroups" type="Reference" refTo="STG_" />
            <field name="unknown00" type="float" expected-value="0.0" />
            <field name="unknown01" type="float" expected-value="0.0" />
            <field name="unknown02" type="float" expected-value="0.0" />
            <field name="unknown03" type="float" expected-value="0.0" />
            <field name="sts" type="Reference" refTo="STS_"/>
            <field name="bones"  type="Reference" refTo="BONE" />
            <field name="numberOfBonesToCheckForSkin" type="uint32" />
            <field name="vFlags" type="uint32" default-value="0x180007d" >
                <bits>
                    <bit mask="0x20000" name="hasVertices" />
                    <bit mask="0x40000" name="useUVChannel1" />
                    <bit mask="0x80000" name="useUVChannel2" />
                    <bit mask="0x100000" name="useUVChannel3" />
                </bits>
            </field>
            <field name="vertices" type="Reference" refTo="U8__"/>
            <field name="divisions" type="Reference" refTo="DIV_"/>
            <field name="boneLookup" type="Reference" refTo="U16_"/>
            <field name="boundings" type="BNDSV0" />
            <field name="maybeBoundingsFlags" type="uint32" expected-value="0" />        
            <field name="unknown04" type="uint32" expected-value="0" />
            <field name="unknown05" type="uint32" expected-value="0" />
            <field name="unknown06" type="uint32" expected-value="0" />
            <field name="unknown07" type="uint32" expected-value="0" />
            <field name="unknown08" type="uint32" expected-value="0" />
            <field name="unknown09" type="uint32" expected-value="0" />
            <field name="unknown11" type="uint32" expected-value="0" />
            <field name="unknown12" type="uint32" expected-value="0" />
            <field name="unknown13" type="uint32" expected-value="0" />
            <field name="unknown14" type="uint32" expected-value="0" />
            <field name="unknown15" type="uint32" expected-value="0" />
            <field name="unknown16" type="uint32" expected-value="0" />
            <field name="unknown17" type="uint32" expected-value="0" />
            <field name="unknown18" type="uint32" expected-value="0" />
            <field name="unknown19" type="uint32" expected-value="0" />
            <field name="attachmentPoints" type="Reference" refTo="ATT_" />
            <field name="attachmentPointAddons" type="Reference" refTo="U16_"/>
            <field name="lights" type="Reference" refTo="LITE" />
            <field name="shbxData" type="Reference" refTo="SHBX" />
            <field name="cameras" type="Reference" refTo="CAM_" />
            <field name="d" type="Reference" refTo="U16_" />
            <field name="materialReferences" type="Reference" refTo="MATM" />
            <field name="standardMaterials" type="Reference" refTo="MAT_" />
            <field name="displacementMaterials" type="Reference" refTo="DIS_" />
            <field name="compositeMaterials" type="Reference" refTo="CMP_" />
            <field name="terrainMaterials" type="Reference" refTo="TER_" />
            <field name="volumeMaterials" type="Reference" refTo="VOL_" />
            <!-- it grew in size between version from 2 to 3 which indicates a reference-->
            <field name="unknownMaybeRef0" type="Reference" />
            <field name="creepMaterials" type="Reference" refTo="CREP" />
            <field name="unknown82f8f7b2" size="12" since-version="25" />
            <field name="unknownfd74ca5e" size="12" since-version="26" expected-value="0x000000000000000000000000"/>
            <field name="particles" type="Reference" refTo="PAR_" />
            <field name="particleCopies" type="Reference" refTo="PARC" />
            <field name="ribbons" type="Reference" refTo="RIB_" />
            <field name="projections" type="Reference" refTo="PROJ" />
            <field name="forces" type="Reference" refTo="FOR_" />
            <field name="wrpData" type="Reference" />
            <!-- it grew in size between version from 2 to 3 which indicates a reference-->
            <field name="unknownMaybeRef1" type="Reference" />
            <field name="rigidBodies" type="Reference" refTo="PHRB"/>
            <!-- it grew in size between version from 3x2 to 3x3 which indicates a reference-->
            <field name="unknownMaybeRef2" type="Reference" />
            <field name="physicalJoint" type="Reference" refTo="PHYJ" />
            <field name="unknownMaybeRef4" type="Reference" />
            <field name="ikjtData" type="Reference" refTo="IKJT"/>
            <!-- it grew in size between version from 2 to 3 which indicates a reference-->
            <field name="unknownMaybeRef5" type="Reference" />
            <field name="unknownbd5657bd" size="12" since-version="25" />
            <field name="patuData" type="Reference" refTo="PATU" />
            <field name="trgdData" type="Reference" refTo="TRGD" />
            <field name="absoluteInverseBoneRestPositions" type="Reference" refTo="IREF" />
            <field name="tightHitTest" type="SSGSV1" />
            <field name="fuzzyHitTestObjects" type="Reference" refTo="SSGS" />
            <field name="attachmentVolumes" type="Reference" refTo="ATVL" />
            <field name="attachmentVolumesAddon0" type="Reference" refTo="U16_"/>
            <field name="attachmentVolumesAddon1" type="Reference" refTo="U16_"/>
            <field name="bbscData" type="Reference" refTo="BBSC" />
            <field name="tmdData" type="Reference" />
            <field name="uniqueUnknownNumber" type="uint32" />
            <field name="unknown45" type="Reference" refTo="U32_" />
        </fields>
    </structure>
    
    <structure name="MD34" version="11" size="24">
        <description>Header of a M3 file: Can be found at the start of the file.</description>
        <versions>
            <version number="11" size="24" />
        </versions>
        <fields>
            <field name="tag" type="tag" />
            <field name="indexOffset" type="uint32"/>
            <field name="indexSize" type="uint32" />
            <field name="model" type="Reference" refTo="MODL" />
        </fields>
    </structure>
</structures>
